# –ê–≤—Ç–æ-–°–∏–Ω—Ö—Ä–æ–Ω —á–µ–∫–æ–≤ –∏–∑ `–ÆKassa` –≤ `–ú–æ–π –ù–∞–ª–æ–≥` –¥–ª—è —Å–∞–º–æ–∑–∞–Ω—è—Ç—ã—Ö (–ù–ü–î)

> **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** –ø–ª–∞—Ç–µ–∂–µ–π –∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –ÆKassa –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ "–ú–æ–π –ù–∞–ª–æ–≥"

–î–∞–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –±—ã–ª —Å–æ–∑–¥–∞–Ω –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ —Å–≤—è–∑–∏ —Å —Ç–µ–º, —á—Ç–æ **–ÆKassa** –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ —Å–≤–æ–π —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ-–æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ–∫–æ–≤ –≤ "–ú–æ–π –ù–∞–ª–æ–≥"

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–µ–π –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ .env)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã –ø—Ä–∏ —Å–±–æ—è—Ö —Å–µ—Ç–∏
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker
- –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ÆKassa (Shop ID + API –∫–ª—é—á)
- –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ú–æ–π –ù–∞–ª–æ–≥ (–ª–æ–≥–∏–Ω + –ø–∞—Ä–æ–ª—å)

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Docker
```bash
sudo curl -fsSL https://get.docker.com | sh
```

### 2. –°–æ–∑–¥–∞–µ–º –ø–∞–ø–∫—É `/opt/yookassa-to-mynalog` –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –Ω–µ–µ
```bash
mkdir /opt/yookassa-to-mynalog && cd /opt/yookassa-to-mynalog
```

### 3. –°–∫–∞—á–∏–≤–∞–µ–º —Ñ–∞–π–ª—ã `.env.example` (–µ–≥–æ —Å—Ä–∞–∑—É —Ä–µ–Ω–µ–π–º–∏–º –≤ `.env`) –∏ `docker-compose.yml`
```bash
wget -O .env https://raw.githubusercontent.com/grnfls709/yookassa-to-mynalog/refs/heads/master/.env.example && \
wget -O docker-compose.yml https://raw.githubusercontent.com/grnfls709/yookassa-to-mynalog/refs/heads/master/docker-compose.yml
```

### 4. –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–∞–π–ª `.env` –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ (—Å–º —Ä–∞–∑–¥–µ–ª "–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è")
```bash
nano .env
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|---------|
| `YOOKASSA_SHOP_ID` | ID –º–∞–≥–∞–∑–∏–Ω–∞ –≤ –ÆKassa |
| `YOOKASSA_API_KEY` | API –∫–ª—é—á –ÆKassa |
| `MOY_NALOG_LOGIN` | –ò–ù–ù –≤ –ú–æ–π –ù–∞–ª–æ–≥ |
| `MOY_NALOG_PASSWORD` | –ü–∞—Ä–æ–ª—å –≤ –ú–æ–π –ù–∞–ª–æ–≥ |

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|:----------:|---------|
| `SYNC_START_DATE` | -24—á | –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (YYYY-MM-DD) |
| `INCOME_DESCRIPTION_TEMPLATE` | `–ü–ª–∞—Ç–µ–∂ #{order_id}` | –®–∞–±–ª–æ–Ω –æ–ø–∏—Å–∞–Ω–∏—è –¥–æ—Ö–æ–¥–∞ |
| `CRON_SCHEDULE` | `0 */4 * * *` | –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ cron (–∫–∞–∂–¥—ã–µ 4 —á–∞—Å–∞) |

### –ü—Ä–∏–º–µ—Ä—ã CRON_SCHEDULE

```env
CRON_SCHEDULE='0 * * * *'        # –∫–∞–∂–¥—ã–π —á–∞—Å
CRON_SCHEDULE='0 */6 * * *'      # –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤
CRON_SCHEDULE='0 12 * * *'       # –æ–¥–∏–Ω —Ä–∞–∑ –≤ –¥–µ–Ω—å –≤ 12:00
CRON_SCHEDULE='*/30 * * * *'     # –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
CRON_SCHEDULE='0 0 * * 0'        # –æ–¥–∏–Ω —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é –≤ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ
```

**–§–æ—Ä–º–∞—Ç cron:** `–º–∏–Ω—É—Ç—ã —á–∞—Å—ã –¥–Ω–∏_–º–µ—Å—è—Ü–∞ –º–µ—Å—è—Ü—ã –¥–Ω–∏_–Ω–µ–¥–µ–ª–∏`

## üöÄ –ó–∞–ø—É—Å–∫

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
```bash
docker compose up -d
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
```bash
docker compose logs -f -t
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
docker compose down
```

### –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
```bash
docker compose down && docker compose up -d
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–æ–≤

```
2026-01-21 12:00:00,123 - INFO - –ù–∞—á–∞–ª–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏...
2026-01-21 12:00:01,456 - INFO - ‚úì –£—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ –ú–æ–π –ù–∞–ª–æ–≥.
2026-01-21 12:00:02,789 - INFO - ‚úì –ù–∞–π–¥–µ–Ω–æ –Ω–æ–≤—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π: 3
2026-01-21 12:00:03,012 - INFO - ‚úì –î–æ—Ö–æ–¥ —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: 500 —Ä—É–±. –∑–∞ '–ü–ª–∞—Ç–µ–∂ #12345'
...
2026-01-21 12:00:05,000 - INFO - –†–µ–∑—É–ª—å—Ç–∞—Ç: —É—Å–ø–µ—à–Ω–æ=3, –æ—à–∏–±–æ–∫=0
2026-01-21 12:00:05,001 - INFO - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞.
```